<div class="container mt-5">
<div class="wrapper" data-controller="caracters-and-groups">
  <div class="caracters-list" >
    <div class="">
    <%= link_to "+ participant", { :controller => :caracters, :action => :new }, class:'btn btn-dark' %>
      <% @caracters.each do |caracter| %>
        <div class="cards">
        <%if caracter.status %>
          <div class="d-flex m-2 align-items-center" data-caracters-and-groups-target="caracterslist">
            <%= cl_image_tag caracter.photo.key, :transformation=>[
            {:gravity=>"face", :height=>400, :width=>400, :crop=>"crop"},
            {:radius=>"max"},
            {:width=>80, :crop=>"scale"}
            ], class: "avatar-bordered"
             %>
        <% else %>
            <div class="d-flex m-2 align-items-center" data-caracters-and-groups-target="caracterslist">
            <%= cl_image_tag caracter.photo.key, :transformation=>[
            {:gravity=>"face", :height=>400, :width=>400, :crop=>"crop"},
            {:radius=>"max"},
            {:width=>80, :crop=>"scale"}
            ], class: "avatar-bordered black-n-white"
             %>
        <% end %>
            <p class="name"><%= caracter.name %></p>
          </div>
        </div>
      <% end %>
    </div>
  </div>
    <div class="">
      <% if Group.all.count == 0 %>
        <%= render 'groups/form', group: @group %>
      <% else %>
        <%= render 'groups/reset' %>
      <% end %>
    </div>


  <div class="group-grid result-box" data-caracters-and-groups-target="result">
    <% @groups.each_with_index do |group, index| %>
      <div class="group-card ">
        <h4>Groupe <%= index + 1 %></h4>
        <% group.memberships.each do |membership|  %>
          <div class="">

            <p><%= membership.caracter.name %></p>
            <div class="">
            <%= cl_image_tag membership.caracter.photo.key, :transformation=>[
            {:gravity=>"face", :height=>400, :width=>400, :crop=>"crop"},
            {:radius=>"max"},
            {:width=>200, :crop=>"scale"}
            ], class:"avatar-bordered" %>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
</div>
